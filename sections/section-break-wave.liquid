{% liquid
  assign bg_color = section.settings.background_color | default: settings.primary_color
%}

<section
  style="color: {{ bg_color }}"
  class="
    {% if section.settings.flip_horizontal %}scale-x-[-1]{% endif %}
    {% if section.settings.flip_vertical %}scale-y-[-1]{% endif %}
  "
>
  <svg
    class="waves-animated-1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 24 150 28"
    preserveAspectRatio="none"
  >
    <defs>
      <path id="gentle-wave" d="M-160 44c30 0
        58-18 88-18s
        58 18 88 18
        58-18 88-18
        58 18 88 18
        v44h-352z"></path>
    </defs>
    <g class="parallax1">
      <use xlink:href="#gentle-wave" x="50" y="3" fill="currentColor"></use>
    </g>
    <g class="parallax2">
      <use xlink:href="#gentle-wave" x="50" y="0" fill="currentColor"></use>
    </g>
    <g class="parallax3">
      <use xlink:href="#gentle-wave" x="50" y="9" fill="currentColor"></use>
    </g>
    <g class="parallax4">
      <use xlink:href="#gentle-wave" x="50" y="6" fill="currentColor"></use>
    </g>
  </svg>
</section>

{% style %}
  .waves-animated-1 {
    position: relative;
    width: 100%;
    height: 80px;
  }

  .waves-animated-1 use {
    animation: move-forever 12s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;
  }

  .waves-animated-1 .parallax1 use {
    animation-delay: -2s;
    animation-duration: 18s;
  }

  .waves-animated-1 .parallax2 use {
    animation-delay: -5s;
    animation-duration: 8s;
    opacity: 0.3;
  }

  .waves-animated-1 .parallax3 use {
    animation-delay: -3s;
    animation-duration: 8s;
    opacity: 0.3;
  }

  .waves-animated-1 .parallax4 use {
    animation-delay: -2s;
    animation-duration: 5s;
    opacity: 0.3;
  }

  @keyframes move-forever {
    0% {
      transform: translate3d(-90px, 0, 0);
    }
    100% {
      transform: translate3d(85px, 0, 0);
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "t:general.section_break_wave",
  "settings": [
    {
      "id": "background_color",
      "type": "color",
      "label": "t:labels.background"
    },
    {
      "type": "checkbox",
      "id": "flip_horizontal",
      "label": "t:options.flip.horizontally",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "flip_vertical",
      "label": "t:options.flip.vertically",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "t:general.section_break_wave",
      "category": "Break"
    }
  ]
}
{% endschema %}
